{"config":{"separator":"[\\s\\-_,:!=\\[\\]()\\\\\"`/]+|\\.(?!\\d)"},"items":[{"location":"","level":1,"title":"Installation","text":"<p>Welcome to DistroRun. Because DistroRun interacts directly with low-level system primitives (like <code>chroot</code> and namespaces) to build immutable images, this engine is designed exclusively for Linux environments.</p>","path":["Installation"],"tags":[]},{"location":"#prerequisites","level":2,"title":"Prerequisites","text":"<p>Before building your first OS image, ensure your system has the following dependencies installed:</p>","path":["Installation"],"tags":[]},{"location":"#core-engine","level":3,"title":"Core Engine","text":"<ul> <li>Go (v1.25.0+)  Required to run and compile the DistroRun core orchestration engine.</li> </ul>","path":["Installation"],"tags":[]},{"location":"#tooling-registry","level":3,"title":"Tooling &amp; Registry","text":"<ul> <li>Node.js (v22.21.1+)  Required to run the local artifact Registry and the Language Server Protocol (LSP).</li> <li>Visual Studio Code  The officially supported IDE for writing your declarative <code>distro.yaml</code> files.</li> </ul> <p>System Note: DistroRun relies on native Linux tools to generate bootable artifacts (like <code>grub-mkrescue</code>). We recommend running it on a modern Linux host.</p>","path":["Installation"],"tags":[]},{"location":"#quick-start","level":2,"title":"Quick Start","text":"<p>Get DistroRun up and running in your terminal in just a few commands:</p> <pre><code># 1. Clone the repository\n$ git clone https://github.com/Distrorun/Distrorun.git\n\n# 2. Navigate to the project directory\n$ cd Distrorun\n\n# 3. Run the automated installer (compiles the Go binary and sets up the CLI)\n$chmod +x install$ ./install\n</code></pre>","path":["Installation"],"tags":[]},{"location":"run/","level":1,"title":"CLI Reference","text":"<p>The DistroRun Command Line Interface (CLI) is your primary tool for interacting with the core Go orchestration engine. It allows you to validate configurations, trigger system builds, and interact with the local registry.</p>","path":["CLI Reference"],"tags":[]},{"location":"run/#global-flags","level":2,"title":"Global Flags","text":"<p>These flags can be used alongside any DistroRun command.</p> <ul> <li><code>--debug</code>, <code>-d</code>: Enable verbose logging (useful for troubleshooting package manager output or system calls).</li> <li><code>--help</code>, <code>-h</code>: Print the help menu for the current command.</li> </ul>","path":["CLI Reference"],"tags":[]},{"location":"run/#distrorun-build","level":2,"title":"<code>distrorun build</code>","text":"<p>The core command of the engine. It reads your YAML file. sets up the isolated namespaces (chroot), fetches the packages, applies configurations, and generates the final bootable ISO and SBOM.</p> <p>Privilege Escalation: Because DistroRun utilizes low-level Linux system primitives (like mounting <code>/proc</code> and creating namespaces), the <code>build</code> command must be run with <code>root</code> privileges.</p>","path":["CLI Reference"],"tags":[]},{"location":"run/#usage","level":3,"title":"Usage","text":"<pre><code>sudo distrorun build [flags]\n</code></pre>","path":["CLI Reference"],"tags":[]},{"location":"run/#flags","level":3,"title":"Flags","text":"<ul> <li><code>-f, --file string</code>: Path to the configuration file (default: <code>./distro.yaml</code>)</li> <li><code>-o, --out-dir string</code>: Output directory for the generated ISO and SBOM (default: <code>./build</code>)</li> <li><code>--no-cache</code>: Force a fresh download of all base images and packages, ignoring the local squashfs cache.</li> </ul>","path":["CLI Reference"],"tags":[]},{"location":"run/#example","level":3,"title":"Example","text":"<pre><code># Build the OS with debug logs enabled\nsudo distrorun build -f ./production/web-node.yaml --out-dir ./artifacts -d\n\n# Expected Output:\n# [INFO] Parsing web-node.yaml... Valid.\n# [INFO] Target OS: fedora (server)\n# [INFO] Creating isolated build namespace...\n# [INFO] Fetching packages via DNF...\n# [INFO] Generating SBOM (SPDX format)...\n# [SUCCESS] ISO generated at ./artifacts/web-node.iso\n</code></pre>","path":["CLI Reference"],"tags":[]},{"location":"run/#distrorun-validate","level":2,"title":"<code>distrorun validate</code>","text":"<p>Parses and validates your declarative YAML file without executing a build. This command checks the file against the DistroRun JSON Schema to catch typos, missing required fields (like passwords), or invalid package configurations.</p> <p>Note: Unlike <code>build</code>, this command runs purely statically and does not require root privileges.</p>","path":["CLI Reference"],"tags":[]},{"location":"run/#usage_1","level":3,"title":"Usage","text":"<pre><code>distrorun validate -f &lt;path-to-yaml&gt;\n</code></pre>","path":["CLI Reference"],"tags":[]},{"location":"run/#example_1","level":3,"title":"Example","text":"<pre><code>distrorun validate -f ./distro.yaml\n\n# Expected Output:\n#  Validation passed. The configuration is strictly compliant.\n</code></pre> <p>** CI/CD Tip:** Add <code>distrorun validate</code> to your GitHub Actions or GitLab CI pipelines to automatically test pull requests before attempting to build them.</p>","path":["CLI Reference"],"tags":[]},{"location":"run/#distrorun-registry","level":2,"title":"<code>distrorun registry</code>","text":"<p>DistroRun includes built-in commands to interact with your team's Zensical-powered artifact registry. This allows you to treat OS configurations like Docker images.</p>","path":["CLI Reference"],"tags":[]},{"location":"run/#distrorun-registry-push","level":3,"title":"<code>distrorun registry push</code>","text":"<p>Uploads your <code>distro.yaml</code> and its generated SBOM to the registry.</p> <p>Usage:</p> <pre><code>distrorun registry push &lt;username&gt;/&lt;project&gt;:&lt;tag&gt; -f &lt;path-to-yaml&gt; --sbom &lt;path-to-sbom&gt;\n</code></pre> <p>Example:</p> <pre><code>distrorun registry push marsa-maroc/core-web:v1.0.4 -f ./distro.yaml --sbom ./build/sbom.spdx.json\n</code></pre>","path":["CLI Reference"],"tags":[]},{"location":"run/#distrorun-registry-pull","level":3,"title":"<code>distrorun registry pull</code>","text":"<p>Retrieves a configuration from the registry and saves it locally, allowing you to seamlessly reproduce a colleague's build.</p> <p>Usage:</p> <pre><code>distrorun registry pull &lt;username&gt;/&lt;project&gt;:&lt;tag&gt;\n</code></pre> <p>Example:</p> <pre><code>distrorun registry pull marsa-maroc/core-web:v1.0.4\n# Downloads core-web.yaml to your current directory\n</code></pre>","path":["CLI Reference"],"tags":[]},{"location":"yamlfile/","level":1,"title":"How to write a Distrorun file","text":"<p>DistroRun uses a declarative Infrastructure as Code (IaC) approach. The entire state of your target operating system is defined in a single YAML file. </p> <p>This design allows you to version-control your infrastructure, ensure reproducibility, and abstract away the low-level complexities of Linux system building.</p>","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#examples","level":2,"title":"Examples","text":"<p>Before diving into the reference, here are two common configurations to get you started.</p>","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#1-fedora-server","level":3,"title":"1. Fedora Server","text":"<p>For Fedora, the <code>type</code> field is mandatory to determine the base overlay (e.g., <code>server</code> vs <code>workstation</code>).</p> <pre><code>version: \"1\"\n\ndistro:\n  name: fedora\n  type: server\n\npackages:\n  - nginx\n  - vim\n  - curl\n\nusers:\n  - name: user1\n    password: \"securepassword123\"\n\nservices:\n  enable:\n    - nginx\n\nbuild:\n  sbom: true\n</code></pre>","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#2-fedora-workstation","level":3,"title":"2. Fedora Workstation","text":"<p>For a desktop environment, set <code>type</code> to <code>workstation</code>. This instructs the engine to include the graphical stack and desktop dependencies.</p> <pre><code>version: \"1\"\n\ndistro:\n  name: fedora\n  type: workstation\n\npackages:\n  - gnome-shell\n  - firefox\n  - vim\n\nusers:\n  - name: user1\n    password: \"securepassword123\"\n\nservices:\n  enable:\n    - gdm\n\nbuild:\n  sbom: true\n</code></pre>","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#3-alpine-minimal","level":3,"title":"3. Alpine Minimal","text":"<p>For Alpine Linux, the <code>type</code> field is omitted. By design, DistroRun treats Alpine as a minimal server environment.</p> <pre><code>version: \"1\"\n\ndistro:\n  name: alpine\n\npackages:\n  - nginx\n\nusers:\n  - name: root\n    password: \"rootpassword\"\n\nservices:\n  enable:\n    - nginx\n\nbuild:\n  sbom: false\n</code></pre>","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#schema-reference","level":2,"title":"Schema Reference","text":"","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#version","level":3,"title":"<code>version</code>","text":"<p>Type: <code>string</code> | Required: Yes</p> <p>The version of your configuration file. This follows semantic versioning and can be any valid version string (e.g., <code>\"1\"</code>, <code>\"1.0\"</code>, <code>\"1.0.12\"</code>).</p>","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#distro","level":3,"title":"<code>distro</code>","text":"<p>Defines the target operating system and its architecture profile. DistroRun automatically injects the necessary base packages (like the kernel, bootloader, and init system) based on this selection.</p> Key Type Description <code>name</code> <code>string</code> The target distribution. Supported values: <code>fedora</code>, <code>alpine</code>. <code>type</code> <code>string</code> The system profile. Required for <code>fedora</code> (<code>server</code> or <code>workstation</code>). Ignored for <code>alpine</code>.","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#packages","level":3,"title":"<code>packages</code>","text":"<p>Type: <code>list of strings</code> | Required: No</p> <p>A list of software packages to install via the distribution's native package manager (<code>dnf</code> for Fedora, <code>apk</code> for Alpine).</p> <p>Note</p> <p>Do not include base system dependencies (like <code>systemd</code> or <code>linux-kernel</code>); the DistroRun engine handles these automatically.</p>","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#users","level":3,"title":"<code>users</code>","text":"<p>Type: <code>list of objects</code> | Required: Yes</p> <p>Defines the system users. At least one user must be defined to ensure the system is accessible after booting.</p> Key Type Description <code>name</code> <code>string</code> The UNIX username (e.g., <code>root</code>, <code>charif</code>). <code>password</code> <code>string</code> The plain-text password. <p>Security Note</p> <p>DistroRun reads the password string and securely hashes it (e.g., via SHA-512) before injecting it into <code>/etc/shadow</code>. The plain text is never stored in the final OS image.</p>","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#services","level":3,"title":"<code>services</code>","text":"<p>Type: <code>object</code> | Required: No</p> <p>Manages the runtime initialization of services. DistroRun acts as an abstraction layer: it translates these instructions into <code>systemd</code> symlinks for Fedora, or <code>OpenRC</code> runlevels for Alpine.</p> Key Type Description <code>enable</code> <code>list of strings</code> Services to start automatically at boot (e.g., <code>nginx</code>).","path":["How to write a Distrorun file"],"tags":[]},{"location":"yamlfile/#build","level":3,"title":"<code>build</code>","text":"<p>Type: <code>object</code> | Required: No</p> <p>Controls the behavior of the DistroRun Go engine during the artifact generation phase.</p> Key Type Description <code>sbom</code> <code>boolean</code> If <code>true</code>, the engine scans the final rootfs and generates a Software Bill of Materials (SPDX JSON). Set to <code>false</code> for faster, iterative development builds. Defaults to <code>false</code> if omitted.","path":["How to write a Distrorun file"],"tags":[]}]}